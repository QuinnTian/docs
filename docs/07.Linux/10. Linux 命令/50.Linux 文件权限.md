---
title: Linux 文件权限
date: 2022-02-13 18:31:06
permalink: /pages/d363ef/
---

# Linux 文件权限

[[toc]]

[toc]

## 查看文件权限

`ls -l`

![image-20220213183337993](https://cdn.jsdelivr.net/gh/QuinnTian/imgchr/imgs/image-20220213183337993.png)

第一列含义

| 标识 | 含义       |
| ---- | ---------- |
| -    | 文件       |
| d    | 目录       |
| l    | 链接       |
| c    | 字符型设备 |
| b    | 块设备     |
| n    | 网络设备   |

后面三组分别代表对象所属用户、对象所属组、系统其他用户的权限

| 标识 | 含义     |
| ---- | -------- |
| r    | 可读     |
| w    | 可写     |
| x    | 可执行   |
| -    | 无此权限 |

## 默认文件权限

`touch newfile`创建文件时默认赋予的权限，使用`umask`更改

查看 `umask`

![image-20220213184154470](https://cdn.jsdelivr.net/gh/QuinnTian/imgchr/imgs/image-20220213184154470.png)

第一位黏着位，后三位代表文件八进制值

八进制文件权限

如 0022

- 第一位黏着位
- 第二位所属用户三位二进制权限转换成八进制
- 第三位所属组文件权限三位二进制权限转换成八进制
- 第四位其他用户文件权限三位二进制权限转换成八进制

转换权限

| 权限 | 二进制 | 八进制 | 含义                 |
| ---- | ------ | ------ | -------------------- |
| ---  | 000    | 0      | 没有权限             |
| --x  | 001    | 1      | 只有执行权限         |
| -w-  | 010    | 2      | 只有写入权限         |
| -wx  | 011    | 3      | 只有写入和执行权限   |
| r--  | 100    | 4      | 只有读取权限         |
| r-x  | 101    | 5      | 只有读取和执行权限   |
| rw-  | 110    | 6      | 只有读取和写入权限   |
| rwx  | 111    | 7      | 读取、写入和执行权限 |

Linux 中默认文件创建授予权限是644，来源如下

- umask 默认值022，文件全权限是只有读取和写入权限 666
- 666-022=644，即用户可以读取和写入，本组和其他用户只能读取

Linux 中目录的默认权限是755，来源如下

- 目录全权限是777，可读写和执行 
- 777-022=755，即用户可以读取写入执行，同组用户和其他用户只能读取和执行

更改umask 值

`umask 026 ` 那么新建的文件会变成640，新建的目录会变为751

umask 设置的值存放在

- /etc/profile(一般存放在此地)
- /etc/login.defs(ubuntu)

## 改变权限

改变文件和目录的权限

`chmod [opt] [mode] file`

使用八进制，如授予用户全部权限，同组用户只有读取和执行权限，其他用户没有任何权限

```
chmod 760 file

```

使用符号模式，如下授予其他用户读取权限

```
chmod o+r file
```

第一个符号主要有，指定授予对象

| 符号 | 含义             |
| ---- | ---------------- |
| u    | 用户             |
| g    | 组               |
| o    | 其他             |
| a    | 同时设置上面三个 |

第二个符号，权限授予符

| 符号 | 含义     |
| ---- | -------- |
| +    | 增加权限 |
| -    | 减少权限 |
| =    | 赋予权限 |

第三个符号，授予的权限

| 符号 | 含义                                             |
| ---- | ------------------------------------------------ |
| r    | 读取                                             |
| w    | 写入                                             |
| x    | 执行                                             |
| X    | 如果对象是目录或者它已经有执行权限，赋予执行权限 |
| s    | 运行时从新设置 UID 或 GID                        |
| t    | 保留文件或目录                                   |
| u    | 将权限设置成和属主一样                           |
| g    | 同组一样                                         |
| o    | 同其他用户一样                                   |

- 选项 -R 递归设置目录下所有文件

## 改变所属关系

### 改变所属用户与组

chmod opt ower[.group] filename

如

```
改变为users组下的用户tom
chmod tom.users file1
只改变用户
chmod tom file1
只改变组
chmod .users file1
当用户名和用户组名一致可以简写,如用户名和组名都是tome
chmod tom. file1
```

- 这里的文件可以是文件也是目录
- -R 可以递归执行目录下所有文件

### 改变组

`chgrp 组名 文件名`

### 文件共享

待添加



